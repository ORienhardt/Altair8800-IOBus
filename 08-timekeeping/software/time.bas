5 DIM ND(35,20):GOSUB 900
10 GOSUB 400:PRINT H;M;S
15 REM K=24:GOSUB 200:OUT 127,3:REM the time is now
20 N=H MOD 12:IF N=0 THEN N=12
21 GOSUB 100
30 IF M=0 THEN 45
35 IF M<10 THEN K=30:GOSUB 200:REM O
40 N=M:GOSUB 100
45 K=31:IF H>=12 THEN K=32: REM AM or PM
47 GOSUB 200:OUT 127,3
52 IF S>0 THEN 55
53 K=29:GOSUB 200:OUT 127,3:REM precisely
54 GOTO 10
55 K=28:GOSUB 200:OUT 127,3:REM and
60 N=S:GOSUB 100
70 K=27:GOSUB 200:REM seconds
80 OUT 127,2
90 IF INKEY$="" THEN 10
95 END
99 :
100 IF N>19 THEN 140
110 I1=N:I2=-1:GOTO 170
140 I1 = INT(N/10)+18:I2 = -1
150 IF (N MOD 10)>0 THEN I2 = N MOD 10
170 K=I1:GOSUB 200
180 IF I2>=0 THEN K=I2:GOSUB 200
185 OUT 127,3
190 RETURN
195 :
200 IF INP(127) AND 128 THEN 200
205 FOR I=1 TO ND(K,0)
207 OUT 127,ND(K,I)
210 IF INP(127) AND 128 THEN 210
220 NEXT I
230 RETURN
299 :
300 IF INP(127) AND 128 THEN 300
310 OUT 127,D
320 RETURN
399 :
400 REM -------- get current time in h:m:s
410 R=0:GOSUB 500:S=D
420 R=1:GOSUB 500:M=D
430 R=2:GOSUB 500:H=D
440 R=0:GOSUB 500:IF D<S THEN 410
450 RETURN
499 :
500 REM -------- read clock register R
510 OUT 96,129+(R AND 31)*2
520 D=INP(97)
530 D=INT(D/16)*10+(D AND 15)
540 RETURN
599 :
900 FOR I=0 TO 32
910 N=1
920 READ D:ND(I,N)=D
930 IF D>=0 THEN N=N+1:GOTO 920
940 ND(I, 0)=N-1
950 NEXT I
960 RETURN
999 :
1105 DATA 43,60,53,-1:REM zero
1110 DATA 46,15,11,-1:REM one
1115 DATA 17,22,22,2,3,-1:REM two
1120 DATA 29,14,19,-1:REM three
1125 DATA 40,40,58,-1:REM four
1130 DATA 40,40,6,35,-1:REM five
1135 DATA 55,55,12,12,4,55,-1:REM six
1140 DATA 55,55,7,7,35,12,11,-1:REM seven
1145 DATA 20,2,13,-1:REM eight
1150 DATA 11,24,6,11,-1:REM nine
1155 DATA 13,7,7,11,-1:REM ten
1160 DATA 12,45,7,7,35,12,11,-1:REM eleven
1161 DATA 13,48,7,7,45,35,-1:REM twelve
1165 DATA 29,51,1,2,13,19,11,-1:REM thirteen
1170 DATA 40,58,1,2,13,19,11,-1:REM fourteen
1175 DATA 40,12,40,1,2,13,19,11,-1:REM fifteen
1180 DATA 55,55,12,2,41,55,1,2,13,19,11,-1:REM sixteen
1185 DATA 55,55,7,7,35,12,11,1,2,13,19,11,-1:REM seventeen
1190 DATA 20,1,2,13,19,11,-1:REM eighteen
1200 DATA 11,6,11,1,2,13,19,11,-1:REM nineteen
1205 DATA 17,46,7,11,17,19,2,-1:REM twenty
1210 DATA 29,52,1,2,13,19,-1:REM thirty
1215 DATA 40,58,2,13,19,-1:REM fourty
1220 DATA 40,40,12,40,40,1,2,13,19,-1:REM fifty
1230 DATA 18,15,2,17,6,16,2,12,43,2,11,32,2,-1:REM the time is now
1240 DATA 23,42,45,24,24,2,41,-1:REM o'clock
1250 DATA 16,12,11,12,2,13,55,-1:REM minutes
1260 DATA 55,55,7,2,42,12,11,2,21,55,-1:REM seconds
1270 DATA 26,11,21,2,-1:REM and
1280 DATA 9,14,7,55,6,43,45,19,-1:REM precisely
1290 DATA 53,3,-1:REM O
1300 DATA 20,3,7,7,16,3,-1:REM am
1310 DATA 9,19,3,7,7,16,3,-1: REM pm
